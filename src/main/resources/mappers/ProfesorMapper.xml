<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Mappers.ProfesorMapper">
    <select parameterType="map" id="loadProfesor" resultMap='Profesor'>
    select
    
    p.id as peid,
    p.nombre as penombre ,
    p.apellido as peapellido ,
    p.correo as pecorreo ,
    p.contasena as peconstrasena ,
    
    pr.decanatura as prdecanatura             
                
    FROM profesor as pr
    left join persona as p on pr.persona_id = p.id
    WHERE pr.persona_id=#{id} 
        
    </select>
    
    <select parameterType="map" id="loadProfesorLogin" resultMap='Profesor'>
    select
    
    p.id as peid,
    p.nombre as penombre ,
    p.apellido as peapellido ,
    p.correo as pecorreo ,
    p.contasena as peconstrasena ,
    
    pr.decanatura as prdecanatura             
                
    FROM profesor as pr
    left join persona as p on pr.persona_id = p.id
    WHERE pr.persona_id=#{id} and p.contasena =#{psw}
        
    </select>
    
    <insert parameterType="map" id="crearProfesor">
        insert into persona (id, nombre, apellido, correo, contasena) values( 
	#{id},#{nombre}, #{apellido}, #{correo}, #{contra});
        insert into profesor (persona_id, decanatura) values(
        #{id}, #{dec})
    </insert>
    <resultMap type='Profesor' id='Profesor' extends='Mappers.PersonaMapper.Persona'>
        <result property='decanatura' column = 'prdecanatura'/>
    </resultMap>
</mapper>